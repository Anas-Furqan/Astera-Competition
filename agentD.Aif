<?xml version="1.0" encoding="utf-8"?>
<AiFlowDocument xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" ProductVersion="12.1.0.744">
  <IsFolder>false</IsFolder>
  <Id>0</Id>
  <IsNewRecord>false</IsNewRecord>
  <Name>C:\Users\THIS PC\Documents\GitHub\Astera-Competition\agentD.Aif</Name>
  <Description />
  <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
  <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
  <Views />
  <AutoLayoutOnNextLoad>false</AutoLayoutOnNextLoad>
  <ExplicitAnchors />
  <Actions>
    <FlowDocumentItemAction>
      <ActionProperties>
        <UniqueId>91fb5c16-6a13-4010-b82b-59aa4980b85b</UniqueId>
        <DocumentItemData>
          <SharingConnection>false</SharingConnection>
          <ShareConnectionInstanceAmongDestinations>false</ShareConnectionInstanceAmongDestinations>
        </DocumentItemData>
        <ActionId>91fb5c16-6a13-4010-b82b-59aa4980b85b</ActionId>
        <SharedItemPath>
          <Path />
          <UncPath />
        </SharedItemPath>
        <ActionTemplateName>AiStart</ActionTemplateName>
        <NodeBounds>
          <NormalBounds>
            <Height>39</Height>
            <Width>110</Width>
            <X>780</X>
            <Y>185</Y>
            <IsExpanded>false</IsExpanded>
            <ActualExpandedHeight>0</ActualExpandedHeight>
            <IsSorted>false</IsSorted>
          </NormalBounds>
        </NodeBounds>
        <IsSkip>false</IsSkip>
        <IsHidden>false</IsHidden>
        <SourceActionRole>Normal</SourceActionRole>
        <DoNotPushdown>false</DoNotPushdown>
        <Name>Start</Name>
      </ActionProperties>
      <AiFlowItemDataStart>
        <Name>Start</Name>
        <IsShared>false</IsShared>
        <PythonCode>def build_message(agent_context : AiAgentContext, data_context : AiDataContext) -&gt; TemplateParams :&#xD;
&#xD;
    &#xD;
    return TemplateParams()</PythonCode>
        <ReturnVariable>result</ReturnVariable>
        <StateLayout IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>Start</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields />
          <Children />
          <Referenced />
          <ValidationRules />
          <IsReadOnly>false</IsReadOnly>
        </StateLayout>
        <Layout xsi:type="RecordLayout" IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>Start</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields />
          <Children />
          <Referenced />
          <ValidationRules />
          <IsReadOnly>false</IsReadOnly>
        </Layout>
        <Template>
          <DocumentDescription />
          <SystemPrompt />
          <UserPrompt />
          <UserPromptTemplateName />
          <TemplateType>Template</TemplateType>
          <UseClusterMasterPrompt>false</UseClusterMasterPrompt>
          <Llm>
            <Id>97463b2b-07c0-42f2-87e0-f62e2f11ecf0</Id>
            <StreamResponseToUser>false</StreamResponseToUser>
            <ReturnsStructuredOutput>false</ReturnsStructuredOutput>
            <OutputLayout IsHierarchicalFile="false">
              <IsFolder>false</IsFolder>
              <Id>0</Id>
              <IsNewRecord>false</IsNewRecord>
              <Name>Template</Name>
              <Description />
              <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
              <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
              <IsSharedLayout>false</IsSharedLayout>
              <LayoutBuildingOptions>
                <RecordType>Record</RecordType>
                <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
                <LayoutBuildingProcess>Default</LayoutBuildingProcess>
              </LayoutBuildingOptions>
              <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
              <Fields />
              <Children />
              <Referenced />
              <ValidationRules />
              <IsReadOnly>false</IsReadOnly>
            </OutputLayout>
            <WorkingMemoryContextWindow>50</WorkingMemoryContextWindow>
            <MaxAgentCallDepth>5</MaxAgentCallDepth>
            <Name>CompletionLlm</Name>
            <Parameters>
              <Temperature>0.5</Temperature>
              <TopP>1</TopP>
              <MaxTokens>4096</MaxTokens>
              <Timeout>120</Timeout>
            </Parameters>
            <Memory>
              <IncludeUserContext>false</IncludeUserContext>
              <IncludeWorkingMemory>false</IncludeWorkingMemory>
              <IncludeParentsContext>false</IncludeParentsContext>
              <IncludeAncestralContext>false</IncludeAncestralContext>
              <LimitToolCallsInContext>false</LimitToolCallsInContext>
              <ToolCallLimit>10</ToolCallLimit>
            </Memory>
          </Llm>
          <FilePath />
          <Name>Template</Name>
          <Text>📊 Macro Comparison Mode Activated&#xD;
&#xD;
Please enter the Stock Ticker and Metal Symbol separated by a space.&#xD;
&#xD;
Format Example: AAPL XAU or TSLA XAG&#xD;
&#xD;
I will fetch real-time data for both and provide a cross-asset prediction.</Text>
          <CanTemplateBeEmpty>true</CanTemplateBeEmpty>
          <Functions />
          <ReturnVariable>result</ReturnVariable>
          <PythonMethodName>run</PythonMethodName>
          <Layout xsi:type="RecordLayout" IsHierarchicalFile="false">
            <IsFolder>false</IsFolder>
            <Id>0</Id>
            <IsNewRecord>false</IsNewRecord>
            <Name>Template</Name>
            <Description />
            <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
            <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
            <IsSharedLayout>false</IsSharedLayout>
            <LayoutBuildingOptions>
              <RecordType>Record</RecordType>
              <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
              <LayoutBuildingProcess>Default</LayoutBuildingProcess>
            </LayoutBuildingOptions>
            <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
            <Fields />
            <Children />
            <Referenced />
            <ValidationRules />
            <IsReadOnly>false</IsReadOnly>
          </Layout>
        </Template>
      </AiFlowItemDataStart>
    </FlowDocumentItemAction>
    <FlowDocumentItemAction>
      <ActionProperties>
        <UniqueId>35ec620d-c00e-42cc-a20c-279f6fc93576</UniqueId>
        <DocumentItemData>
          <SharingConnection>false</SharingConnection>
          <ShareConnectionInstanceAmongDestinations>false</ShareConnectionInstanceAmongDestinations>
        </DocumentItemData>
        <ActionId>35ec620d-c00e-42cc-a20c-279f6fc93576</ActionId>
        <SharedItemPath>
          <Path />
          <UncPath />
        </SharedItemPath>
        <ActionTemplateName>AiEnd</ActionTemplateName>
        <NodeBounds>
          <NormalBounds>
            <Height>39</Height>
            <Width>110</Width>
            <X>780</X>
            <Y>185</Y>
            <IsExpanded>false</IsExpanded>
            <ActualExpandedHeight>0</ActualExpandedHeight>
            <IsSorted>false</IsSorted>
          </NormalBounds>
        </NodeBounds>
        <IsSkip>false</IsSkip>
        <IsHidden>false</IsHidden>
        <SourceActionRole>Normal</SourceActionRole>
        <DoNotPushdown>false</DoNotPushdown>
        <Name>End</Name>
      </ActionProperties>
      <AiFlowItemDataEnd>
        <Name>End</Name>
        <IsShared>false</IsShared>
        <PythonCode>def build_message(agent_context : AiAgentContext, data_context : AiDataContext) -&gt; TemplateParams :  &#xD;
&#xD;
    return TemplateParams() </PythonCode>
        <ReturnVariable>result</ReturnVariable>
        <StateLayout IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>End</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields />
          <Children />
          <Referenced />
          <ValidationRules />
          <IsReadOnly>false</IsReadOnly>
        </StateLayout>
        <Layout xsi:type="RecordLayout" IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>End</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields />
          <Children />
          <Referenced />
          <ValidationRules />
          <IsReadOnly>false</IsReadOnly>
        </Layout>
        <Template>
          <DocumentDescription />
          <SystemPrompt />
          <UserPrompt />
          <UserPromptTemplateName />
          <TemplateType>Template</TemplateType>
          <UseClusterMasterPrompt>false</UseClusterMasterPrompt>
          <Llm>
            <Id>9b576c1c-17f7-4138-b816-02ff267e6f7b</Id>
            <StreamResponseToUser>false</StreamResponseToUser>
            <ReturnsStructuredOutput>false</ReturnsStructuredOutput>
            <OutputLayout IsHierarchicalFile="false">
              <IsFolder>false</IsFolder>
              <Id>0</Id>
              <IsNewRecord>false</IsNewRecord>
              <Name>Template</Name>
              <Description />
              <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
              <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
              <IsSharedLayout>false</IsSharedLayout>
              <LayoutBuildingOptions>
                <RecordType>Record</RecordType>
                <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
                <LayoutBuildingProcess>Default</LayoutBuildingProcess>
              </LayoutBuildingOptions>
              <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
              <Fields />
              <Children />
              <Referenced />
              <ValidationRules />
              <IsReadOnly>false</IsReadOnly>
            </OutputLayout>
            <WorkingMemoryContextWindow>50</WorkingMemoryContextWindow>
            <MaxAgentCallDepth>5</MaxAgentCallDepth>
            <Name>CompletionLlm</Name>
            <Parameters>
              <Temperature>0.5</Temperature>
              <TopP>1</TopP>
              <MaxTokens>4096</MaxTokens>
              <Timeout>120</Timeout>
            </Parameters>
            <Memory>
              <IncludeUserContext>false</IncludeUserContext>
              <IncludeWorkingMemory>false</IncludeWorkingMemory>
              <IncludeParentsContext>false</IncludeParentsContext>
              <IncludeAncestralContext>false</IncludeAncestralContext>
              <LimitToolCallsInContext>false</LimitToolCallsInContext>
              <ToolCallLimit>10</ToolCallLimit>
            </Memory>
          </Llm>
          <FilePath />
          <Name>Template</Name>
          <Text>✅ Analysis Task Completed.&#xD;
&#xD;
Thank you for using the Multi-Agent Intelligence Suite.&#xD;
&#xD;
🔄 Ready for more? You can try another option (1, 2, 3, or 4) with a new ticker/symbol to continue your research or "end" to end the conversation.</Text>
          <CanTemplateBeEmpty>true</CanTemplateBeEmpty>
          <Functions />
          <ReturnVariable>result</ReturnVariable>
          <PythonMethodName>run</PythonMethodName>
          <Layout xsi:type="RecordLayout" IsHierarchicalFile="false">
            <IsFolder>false</IsFolder>
            <Id>0</Id>
            <IsNewRecord>false</IsNewRecord>
            <Name>Template</Name>
            <Description />
            <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
            <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
            <IsSharedLayout>false</IsSharedLayout>
            <LayoutBuildingOptions>
              <RecordType>Record</RecordType>
              <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
              <LayoutBuildingProcess>Default</LayoutBuildingProcess>
            </LayoutBuildingOptions>
            <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
            <Fields />
            <Children />
            <Referenced />
            <ValidationRules />
            <IsReadOnly>false</IsReadOnly>
          </Layout>
        </Template>
      </AiFlowItemDataEnd>
    </FlowDocumentItemAction>
    <FlowDocumentItemAction>
      <ActionProperties>
        <UniqueId>9efd4377-0b30-4928-bd08-c952acf846dd</UniqueId>
        <DocumentItemData>
          <SharingConnection>false</SharingConnection>
          <ShareConnectionInstanceAmongDestinations>false</ShareConnectionInstanceAmongDestinations>
        </DocumentItemData>
        <ActionId>9efd4377-0b30-4928-bd08-c952acf846dd</ActionId>
        <SharedItemPath>
          <Path />
          <UncPath />
        </SharedItemPath>
        <ActionTemplateName>AiAgentState</ActionTemplateName>
        <NodeBounds>
          <NormalBounds>
            <Height>39</Height>
            <Width>110</Width>
            <X>780</X>
            <Y>185</Y>
            <IsExpanded>false</IsExpanded>
            <ActualExpandedHeight>0</ActualExpandedHeight>
            <IsSorted>false</IsSorted>
          </NormalBounds>
        </NodeBounds>
        <IsSkip>false</IsSkip>
        <IsHidden>false</IsHidden>
        <SourceActionRole>Normal</SourceActionRole>
        <DoNotPushdown>false</DoNotPushdown>
        <Name>Properties</Name>
      </ActionProperties>
      <AiFlowItemDataState>
        <Name>Properties</Name>
        <IsShared>false</IsShared>
        <PythonCode>def build_prompt(agent_context : AiAgentContext, data_context : AiDataContext) -&gt; TemplateParams : &#xD;
    return TemplateParams()</PythonCode>
        <ReturnVariable>result</ReturnVariable>
        <StateLayout IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>Properties</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields />
          <Children />
          <Referenced>
            <BaseLayout xsi:type="RecordLayout" IsHierarchicalFile="false">
              <IsFolder>false</IsFolder>
              <Id>0</Id>
              <IsNewRecord>false</IsNewRecord>
              <Name>Input</Name>
              <Description />
              <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
              <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
              <IsSharedLayout>false</IsSharedLayout>
              <LayoutBuildingOptions>
                <RecordType>Record</RecordType>
                <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
                <LayoutBuildingProcess>Default</LayoutBuildingProcess>
              </LayoutBuildingOptions>
              <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
              <Fields />
              <Children />
              <Referenced />
              <ValidationRules />
              <IsReadOnly>false</IsReadOnly>
            </BaseLayout>
            <BaseLayout xsi:type="RecordLayout" IsHierarchicalFile="false">
              <IsFolder>false</IsFolder>
              <Id>0</Id>
              <IsNewRecord>false</IsNewRecord>
              <Name>Output</Name>
              <Description />
              <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
              <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
              <IsSharedLayout>false</IsSharedLayout>
              <LayoutBuildingOptions>
                <RecordType>Record</RecordType>
                <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
                <LayoutBuildingProcess>Default</LayoutBuildingProcess>
              </LayoutBuildingOptions>
              <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
              <Fields />
              <Children />
              <Referenced />
              <ValidationRules />
              <IsReadOnly>false</IsReadOnly>
            </BaseLayout>
            <BaseLayout xsi:type="RecordLayout" IsHierarchicalFile="false">
              <IsFolder>false</IsFolder>
              <Id>0</Id>
              <IsNewRecord>false</IsNewRecord>
              <Name>State</Name>
              <Description />
              <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
              <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
              <IsSharedLayout>false</IsSharedLayout>
              <LayoutBuildingOptions>
                <RecordType>Record</RecordType>
                <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
                <LayoutBuildingProcess>Default</LayoutBuildingProcess>
              </LayoutBuildingOptions>
              <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
              <Fields />
              <Children />
              <Referenced />
              <ValidationRules />
              <IsReadOnly>false</IsReadOnly>
            </BaseLayout>
          </Referenced>
          <ValidationRules />
          <IsReadOnly>true</IsReadOnly>
        </StateLayout>
        <Layout xsi:type="RecordLayout" IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>Properties</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields />
          <Children />
          <Referenced>
            <BaseLayout xsi:type="RecordLayout" IsHierarchicalFile="false">
              <IsFolder>false</IsFolder>
              <Id>0</Id>
              <IsNewRecord>false</IsNewRecord>
              <Name>Input</Name>
              <Description />
              <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
              <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
              <IsSharedLayout>false</IsSharedLayout>
              <LayoutBuildingOptions>
                <RecordType>Record</RecordType>
                <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
                <LayoutBuildingProcess>Default</LayoutBuildingProcess>
              </LayoutBuildingOptions>
              <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
              <Fields />
              <Children />
              <Referenced />
              <ValidationRules />
              <IsReadOnly>false</IsReadOnly>
            </BaseLayout>
            <BaseLayout xsi:type="RecordLayout" IsHierarchicalFile="false">
              <IsFolder>false</IsFolder>
              <Id>0</Id>
              <IsNewRecord>false</IsNewRecord>
              <Name>Output</Name>
              <Description />
              <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
              <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
              <IsSharedLayout>false</IsSharedLayout>
              <LayoutBuildingOptions>
                <RecordType>Record</RecordType>
                <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
                <LayoutBuildingProcess>Default</LayoutBuildingProcess>
              </LayoutBuildingOptions>
              <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
              <Fields />
              <Children />
              <Referenced />
              <ValidationRules />
              <IsReadOnly>false</IsReadOnly>
            </BaseLayout>
            <BaseLayout xsi:type="RecordLayout" IsHierarchicalFile="false">
              <IsFolder>false</IsFolder>
              <Id>0</Id>
              <IsNewRecord>false</IsNewRecord>
              <Name>State</Name>
              <Description />
              <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
              <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
              <IsSharedLayout>false</IsSharedLayout>
              <LayoutBuildingOptions>
                <RecordType>Record</RecordType>
                <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
                <LayoutBuildingProcess>Default</LayoutBuildingProcess>
              </LayoutBuildingOptions>
              <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
              <Fields />
              <Children />
              <Referenced />
              <ValidationRules />
              <IsReadOnly>false</IsReadOnly>
            </BaseLayout>
          </Referenced>
          <ValidationRules />
          <IsReadOnly>true</IsReadOnly>
        </Layout>
        <Template>
          <DocumentDescription />
          <SystemPrompt>You are a helpful AI assistant. Always provide clear, accurate, and helpful responses to user queries.</SystemPrompt>
          <UserPrompt />
          <UserPromptTemplateName />
          <TemplateType>Template</TemplateType>
          <UseClusterMasterPrompt>false</UseClusterMasterPrompt>
          <Llm>
            <Id>4c6462fe-3eef-45f8-a4aa-1798382e5b9f</Id>
            <StreamResponseToUser>false</StreamResponseToUser>
            <ReturnsStructuredOutput>false</ReturnsStructuredOutput>
            <OutputLayout IsHierarchicalFile="false">
              <IsFolder>false</IsFolder>
              <Id>0</Id>
              <IsNewRecord>false</IsNewRecord>
              <Name>Template</Name>
              <Description />
              <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
              <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
              <IsSharedLayout>false</IsSharedLayout>
              <LayoutBuildingOptions>
                <RecordType>Record</RecordType>
                <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
                <LayoutBuildingProcess>Default</LayoutBuildingProcess>
              </LayoutBuildingOptions>
              <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
              <Fields />
              <Children />
              <Referenced />
              <ValidationRules />
              <IsReadOnly>false</IsReadOnly>
            </OutputLayout>
            <WorkingMemoryContextWindow>50</WorkingMemoryContextWindow>
            <MaxAgentCallDepth>5</MaxAgentCallDepth>
            <Name>CompletionLlm</Name>
            <Parameters>
              <Temperature>0.5</Temperature>
              <TopP>1</TopP>
              <MaxTokens>4096</MaxTokens>
              <Timeout>120</Timeout>
            </Parameters>
            <Memory>
              <IncludeUserContext>false</IncludeUserContext>
              <IncludeWorkingMemory>false</IncludeWorkingMemory>
              <IncludeParentsContext>false</IncludeParentsContext>
              <IncludeAncestralContext>false</IncludeAncestralContext>
              <LimitToolCallsInContext>false</LimitToolCallsInContext>
              <ToolCallLimit>10</ToolCallLimit>
            </Memory>
          </Llm>
          <FilePath />
          <Name>Template</Name>
          <Text>You are a helpful AI assistant designed to provide accurate and informative responses. You should be professional, friendly, and concise in your communications.</Text>
          <CanTemplateBeEmpty>true</CanTemplateBeEmpty>
          <Functions />
          <ReturnVariable>result</ReturnVariable>
          <PythonMethodName>run</PythonMethodName>
          <Layout xsi:type="RecordLayout" IsHierarchicalFile="false">
            <IsFolder>false</IsFolder>
            <Id>0</Id>
            <IsNewRecord>false</IsNewRecord>
            <Name>Template</Name>
            <Description />
            <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
            <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
            <IsSharedLayout>false</IsSharedLayout>
            <LayoutBuildingOptions>
              <RecordType>Record</RecordType>
              <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
              <LayoutBuildingProcess>Default</LayoutBuildingProcess>
            </LayoutBuildingOptions>
            <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
            <Fields />
            <Children />
            <Referenced />
            <ValidationRules />
            <IsReadOnly>false</IsReadOnly>
          </Layout>
        </Template>
        <MasterPrompt />
        <EnableMasterPrompt>false</EnableMasterPrompt>
      </AiFlowItemDataState>
    </FlowDocumentItemAction>
    <FlowDocumentItemAction>
      <ActionProperties>
        <UniqueId>f6dcb1be-7194-49cd-b209-592726985ac3</UniqueId>
        <DocumentItemData>
          <SharingConnection>false</SharingConnection>
          <ShareConnectionInstanceAmongDestinations>false</ShareConnectionInstanceAmongDestinations>
        </DocumentItemData>
        <ActionId>f6dcb1be-7194-49cd-b209-592726985ac3</ActionId>
        <SharedItemPath>
          <Path />
          <UncPath />
        </SharedItemPath>
        <ActionTemplateName>AiUserInput</ActionTemplateName>
        <NodeBounds>
          <NormalBounds>
            <Height>39</Height>
            <Width>110</Width>
            <X>780</X>
            <Y>185</Y>
            <IsExpanded>false</IsExpanded>
            <ActualExpandedHeight>0</ActualExpandedHeight>
            <IsSorted>false</IsSorted>
          </NormalBounds>
        </NodeBounds>
        <IsSkip>false</IsSkip>
        <IsHidden>false</IsHidden>
        <SourceActionRole>Normal</SourceActionRole>
        <DoNotPushdown>false</DoNotPushdown>
        <Name>InputMessage</Name>
      </ActionProperties>
      <AiFlowItemDataUserInput>
        <Name>InputMessage</Name>
        <IsShared>false</IsShared>
        <ReturnVariable>result</ReturnVariable>
        <StateLayout IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>InputMessage</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields>
            <RecordField DataType="String" Index="0" Name="Message">
              <AggregateFunction>Last</AggregateFunction>
              <DbProviderType>SqlServer</DbProviderType>
              <UniqueId>e05b1e5a-ada8-4809-89f9-c1694c344e93</UniqueId>
              <CoreDbType>NVarChar</CoreDbType>
              <DbDataTypeName />
              <DecimalLength>0</DecimalLength>
            </RecordField>
          </Fields>
          <Children />
          <Referenced />
          <ValidationRules />
          <IsReadOnly>true</IsReadOnly>
        </StateLayout>
        <Layout xsi:type="RecordLayout" IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>InputMessage</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields>
            <RecordField DataType="String" Index="0" Name="Message">
              <AggregateFunction>Last</AggregateFunction>
              <DbProviderType>SqlServer</DbProviderType>
              <UniqueId>e05b1e5a-ada8-4809-89f9-c1694c344e93</UniqueId>
              <CoreDbType>NVarChar</CoreDbType>
              <DbDataTypeName />
              <DecimalLength>0</DecimalLength>
            </RecordField>
          </Fields>
          <Children />
          <Referenced />
          <ValidationRules />
          <IsReadOnly>true</IsReadOnly>
        </Layout>
      </AiFlowItemDataUserInput>
    </FlowDocumentItemAction>
    <FlowDocumentItemAction>
      <ActionProperties>
        <UniqueId>11fcc890-c604-4a6c-a5d3-eab491730751</UniqueId>
        <DocumentItemData>
          <SharingConnection>false</SharingConnection>
          <ShareConnectionInstanceAmongDestinations>false</ShareConnectionInstanceAmongDestinations>
        </DocumentItemData>
        <ActionId>11fcc890-c604-4a6c-a5d3-eab491730751</ActionId>
        <SharedItemPath>
          <Path />
          <UncPath />
        </SharedItemPath>
        <ActionTemplateName>AiLlmCall</ActionTemplateName>
        <NodeBounds>
          <NormalBounds>
            <Height>39</Height>
            <Width>110</Width>
            <X>780</X>
            <Y>185</Y>
            <IsExpanded>false</IsExpanded>
            <ActualExpandedHeight>0</ActualExpandedHeight>
            <IsSorted>false</IsSorted>
          </NormalBounds>
        </NodeBounds>
        <IsSkip>false</IsSkip>
        <IsHidden>false</IsHidden>
        <SourceActionRole>Normal</SourceActionRole>
        <DoNotPushdown>false</DoNotPushdown>
        <Name>LlmCall</Name>
      </ActionProperties>
      <AiFlowItemDataLlmCall>
        <Name>LlmCall</Name>
        <IsShared>false</IsShared>
        <PythonCode>import requests&#xD;
&#xD;
def build_prompt(agent_context : AiAgentContext, data_context : AiDataContext) -&gt; TemplateParams :&#xD;
    # User input se ticker aur metal alag karein (e.g., "AAPL XAU")&#xD;
    user_input = agent_context.State.InputMessage.Message.strip().split()&#xD;
    &#xD;
    if len(user_input) &lt; 2:&#xD;
        return TemplateParams(values=["Error", "Please provide both Stock and Metal (e.g., AAPL XAU)", "Invalid Input"])&#xD;
&#xD;
    ticker = user_input[0].upper()&#xD;
    metal = user_input[1].upper()&#xD;
&#xD;
    # --- API Call 1: Yahoo Finance (Stock) ---&#xD;
    stock_url = f"https://query1.finance.yahoo.com/v8/finance/chart/{ticker}"&#xD;
    headers = {'User-Agent': 'Mozilla/5.0'}&#xD;
    try:&#xD;
        stock_res = requests.get(stock_url, headers=headers, timeout=10)&#xD;
        stock_data = stock_res.text&#xD;
    except Exception as e:&#xD;
        stock_data = f"Stock API Error: {str(e)}"&#xD;
&#xD;
    # --- API Call 2: Gold API (Metal) ---&#xD;
    metal_url = f"https://api.gold-api.com/price/{metal}"&#xD;
    try:&#xD;
        metal_res = requests.get(metal_url, timeout=10)&#xD;
        metal_data = metal_res.text&#xD;
    except Exception as e:&#xD;
        metal_data = f"Metal API Error: {str(e)}"&#xD;
&#xD;
    # Prompt ke teeno brackets {0}, {1}, {2} fill karne ke liye:&#xD;
    return TemplateParams(ticker, stock_data, metal_data)</PythonCode>
        <ReturnVariable>result</ReturnVariable>
        <StateLayout IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>LlmCall</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields>
            <RecordField DataType="String" Index="0" Name="LlmName">
              <AggregateFunction>Last</AggregateFunction>
              <DbProviderType>SqlServer</DbProviderType>
              <UniqueId>c2c3f5da-2854-44fe-9932-8e275d1d7831</UniqueId>
              <CoreDbType>Unsupported</CoreDbType>
              <DecimalLength>0</DecimalLength>
            </RecordField>
            <RecordField DataType="String" Index="1" Name="Prompt">
              <AggregateFunction>Last</AggregateFunction>
              <DbProviderType>SqlServer</DbProviderType>
              <UniqueId>7efac566-d8fb-49e0-bdfd-11abcc44b39c</UniqueId>
              <CoreDbType>Unsupported</CoreDbType>
              <DecimalLength>0</DecimalLength>
            </RecordField>
            <RecordField DataType="String" Index="2" Name="Response">
              <AggregateFunction>Last</AggregateFunction>
              <DbProviderType>SqlServer</DbProviderType>
              <UniqueId>90cbfd0f-0fe2-41c5-a518-95baa4be9f16</UniqueId>
              <CoreDbType>Unsupported</CoreDbType>
              <DecimalLength>0</DecimalLength>
            </RecordField>
          </Fields>
          <Children />
          <Referenced />
          <ValidationRules />
          <IsReadOnly>true</IsReadOnly>
        </StateLayout>
        <Layout xsi:type="RecordLayout" IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>LlmCall</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields>
            <RecordField DataType="String" Index="0" Name="LlmName">
              <AggregateFunction>Last</AggregateFunction>
              <DbProviderType>SqlServer</DbProviderType>
              <UniqueId>c2c3f5da-2854-44fe-9932-8e275d1d7831</UniqueId>
              <CoreDbType>Unsupported</CoreDbType>
              <DecimalLength>0</DecimalLength>
            </RecordField>
            <RecordField DataType="String" Index="1" Name="Prompt">
              <AggregateFunction>Last</AggregateFunction>
              <DbProviderType>SqlServer</DbProviderType>
              <UniqueId>7efac566-d8fb-49e0-bdfd-11abcc44b39c</UniqueId>
              <CoreDbType>Unsupported</CoreDbType>
              <DecimalLength>0</DecimalLength>
            </RecordField>
            <RecordField DataType="String" Index="2" Name="Response">
              <AggregateFunction>Last</AggregateFunction>
              <DbProviderType>SqlServer</DbProviderType>
              <UniqueId>90cbfd0f-0fe2-41c5-a518-95baa4be9f16</UniqueId>
              <CoreDbType>Unsupported</CoreDbType>
              <DecimalLength>0</DecimalLength>
            </RecordField>
          </Fields>
          <Children />
          <Referenced />
          <ValidationRules />
          <IsReadOnly>true</IsReadOnly>
        </Layout>
        <Template>
          <DocumentDescription />
          <SystemPrompt />
          <UserPrompt />
          <UserPromptTemplateName />
          <TemplateType>Template</TemplateType>
          <UseClusterMasterPrompt>false</UseClusterMasterPrompt>
          <Llm>
            <Id>edf4af81-e76d-4bbe-a49a-6cb41788af08</Id>
            <StreamResponseToUser>false</StreamResponseToUser>
            <ReturnsStructuredOutput>false</ReturnsStructuredOutput>
            <OutputLayout IsHierarchicalFile="false">
              <IsFolder>false</IsFolder>
              <Id>0</Id>
              <IsNewRecord>false</IsNewRecord>
              <Name>Template</Name>
              <Description />
              <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
              <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
              <IsSharedLayout>false</IsSharedLayout>
              <LayoutBuildingOptions>
                <RecordType>Record</RecordType>
                <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
                <LayoutBuildingProcess>Default</LayoutBuildingProcess>
              </LayoutBuildingOptions>
              <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
              <Fields />
              <Children />
              <Referenced />
              <ValidationRules />
              <IsReadOnly>false</IsReadOnly>
            </OutputLayout>
            <WorkingMemoryContextWindow>50</WorkingMemoryContextWindow>
            <MaxAgentCallDepth>5</MaxAgentCallDepth>
            <Name>GenerationLlm</Name>
            <Parameters>
              <Temperature>0.5</Temperature>
              <TopP>1</TopP>
              <MaxTokens>4096</MaxTokens>
              <Timeout>120</Timeout>
            </Parameters>
            <Memory>
              <IncludeUserContext>false</IncludeUserContext>
              <IncludeWorkingMemory>false</IncludeWorkingMemory>
              <IncludeParentsContext>false</IncludeParentsContext>
              <IncludeAncestralContext>false</IncludeAncestralContext>
              <LimitToolCallsInContext>false</LimitToolCallsInContext>
              <ToolCallLimit>10</ToolCallLimit>
            </Memory>
          </Llm>
          <FilePath />
          <Name>Template</Name>
          <Text>System Role: You are a Multi-Asset Investment Strategist. You have been provided with raw data for a Stock and a Precious Metal.&#xD;
&#xD;
Ticker Analyzed: {ticker} Stock JSON Data: {stock_data} Metal JSON Data: {metal_data}&#xD;
&#xD;
Task:&#xD;
&#xD;
Data Extraction: Extract the Current Price and Previous Close for the Stock. Extract the Spot Price for the Metal.&#xD;
&#xD;
Comparative Table: Create a Markdown table showing:&#xD;
&#xD;
Asset (Stock vs Metal)&#xD;
&#xD;
Current Price&#xD;
&#xD;
Daily Trend (Bullish/Bearish).&#xD;
&#xD;
Macro Analysis: Compare the performance. Is the stock outperforming the metal, or is the metal acting as a better hedge?&#xD;
&#xD;
Strategic Prediction: Based on the current price action in both assets, which one has a higher probability of profit in the next 7 days?&#xD;
&#xD;
Final Recommendation: Provide a clear "Portfolio Allocation" advice (e.g., "60% Stock, 40% Metal").</Text>
          <CanTemplateBeEmpty>false</CanTemplateBeEmpty>
          <Functions />
          <ErrorInfo>
            <IsAPIException>false</IsAPIException>
            <StatusCode>500</StatusCode>
            <IsCPException>false</IsCPException>
            <IsUnhandledException>false</IsUnhandledException>
            <IsCrash>false</IsCrash>
            <Message>Invalid parameter name 2. Position Line 2, Column 70</Message>
            <DbConnectionTimeout>-1</DbConnectionTimeout>
            <DbCommandTimeout>-1</DbCommandTimeout>
          </ErrorInfo>
          <ReturnVariable>result</ReturnVariable>
          <PythonMethodName>run</PythonMethodName>
          <Layout xsi:type="RecordLayout" IsHierarchicalFile="false">
            <IsFolder>false</IsFolder>
            <Id>0</Id>
            <IsNewRecord>false</IsNewRecord>
            <Name>Template</Name>
            <Description />
            <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
            <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
            <IsSharedLayout>false</IsSharedLayout>
            <LayoutBuildingOptions>
              <RecordType>Record</RecordType>
              <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
              <LayoutBuildingProcess>Default</LayoutBuildingProcess>
            </LayoutBuildingOptions>
            <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
            <Fields />
            <Children />
            <Referenced />
            <ValidationRules />
            <IsReadOnly>false</IsReadOnly>
          </Layout>
        </Template>
        <FilePathReferences />
        <LlmName>GenerationLlm</LlmName>
        <StreamResponseToUser>false</StreamResponseToUser>
      </AiFlowItemDataLlmCall>
    </FlowDocumentItemAction>
    <FlowDocumentItemAction>
      <ActionProperties>
        <UniqueId>226fe85b-8d15-4121-9e52-098aa0f52251</UniqueId>
        <DocumentItemData>
          <SharingConnection>false</SharingConnection>
          <ShareConnectionInstanceAmongDestinations>false</ShareConnectionInstanceAmongDestinations>
        </DocumentItemData>
        <ActionId>226fe85b-8d15-4121-9e52-098aa0f52251</ActionId>
        <SharedItemPath>
          <Path />
          <UncPath />
        </SharedItemPath>
        <ActionTemplateName>AiUserOutput</ActionTemplateName>
        <NodeBounds>
          <NormalBounds>
            <Height>39</Height>
            <Width>110</Width>
            <X>780</X>
            <Y>185</Y>
            <IsExpanded>false</IsExpanded>
            <ActualExpandedHeight>0</ActualExpandedHeight>
            <IsSorted>false</IsSorted>
          </NormalBounds>
        </NodeBounds>
        <IsSkip>false</IsSkip>
        <IsHidden>false</IsHidden>
        <SourceActionRole>Normal</SourceActionRole>
        <DoNotPushdown>false</DoNotPushdown>
        <Name>OutputMessage</Name>
      </ActionProperties>
      <AiFlowItemDataUserOutput>
        <Name>OutputMessage</Name>
        <IsShared>false</IsShared>
        <PythonCode>def build_message(agent_context : AiAgentContext, data_context : AiDataContext) -&gt; TemplateParams :  &#xD;
&#xD;
    OutputMessage = agent_context.State.LlmCall.Response&#xD;
&#xD;
    return TemplateParams(OutputMessage) </PythonCode>
        <ReturnVariable>result</ReturnVariable>
        <StateLayout IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>OutputMessage</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields>
            <RecordField DataType="String" Index="0" Name="Message">
              <AggregateFunction>Last</AggregateFunction>
              <DbProviderType>SqlServer</DbProviderType>
              <UniqueId>dd79160a-ff5f-4121-ab81-806a785c53cf</UniqueId>
              <CoreDbType>NVarChar</CoreDbType>
              <DbDataTypeName />
              <DecimalLength>0</DecimalLength>
            </RecordField>
          </Fields>
          <Children />
          <Referenced />
          <ValidationRules />
          <IsReadOnly>true</IsReadOnly>
        </StateLayout>
        <Layout xsi:type="RecordLayout" IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>OutputMessage</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields>
            <RecordField DataType="String" Index="0" Name="Message">
              <AggregateFunction>Last</AggregateFunction>
              <DbProviderType>SqlServer</DbProviderType>
              <UniqueId>dd79160a-ff5f-4121-ab81-806a785c53cf</UniqueId>
              <CoreDbType>NVarChar</CoreDbType>
              <DbDataTypeName />
              <DecimalLength>0</DecimalLength>
            </RecordField>
          </Fields>
          <Children />
          <Referenced />
          <ValidationRules />
          <IsReadOnly>true</IsReadOnly>
        </Layout>
        <Template>
          <DocumentDescription />
          <SystemPrompt />
          <UserPrompt />
          <UserPromptTemplateName />
          <TemplateType>Template</TemplateType>
          <UseClusterMasterPrompt>false</UseClusterMasterPrompt>
          <Llm>
            <Id>e5b91df7-f2ef-4654-b2d2-ff42910f69df</Id>
            <StreamResponseToUser>false</StreamResponseToUser>
            <ReturnsStructuredOutput>false</ReturnsStructuredOutput>
            <OutputLayout IsHierarchicalFile="false">
              <IsFolder>false</IsFolder>
              <Id>0</Id>
              <IsNewRecord>false</IsNewRecord>
              <Name>Template</Name>
              <Description />
              <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
              <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
              <IsSharedLayout>false</IsSharedLayout>
              <LayoutBuildingOptions>
                <RecordType>Record</RecordType>
                <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
                <LayoutBuildingProcess>Default</LayoutBuildingProcess>
              </LayoutBuildingOptions>
              <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
              <Fields />
              <Children />
              <Referenced />
              <ValidationRules />
              <IsReadOnly>false</IsReadOnly>
            </OutputLayout>
            <WorkingMemoryContextWindow>50</WorkingMemoryContextWindow>
            <MaxAgentCallDepth>5</MaxAgentCallDepth>
            <Name>CompletionLlm</Name>
            <Parameters>
              <Temperature>0.5</Temperature>
              <TopP>1</TopP>
              <MaxTokens>4096</MaxTokens>
              <Timeout>120</Timeout>
            </Parameters>
            <Memory>
              <IncludeUserContext>false</IncludeUserContext>
              <IncludeWorkingMemory>false</IncludeWorkingMemory>
              <IncludeParentsContext>false</IncludeParentsContext>
              <IncludeAncestralContext>false</IncludeAncestralContext>
              <LimitToolCallsInContext>false</LimitToolCallsInContext>
              <ToolCallLimit>10</ToolCallLimit>
            </Memory>
          </Llm>
          <FilePath />
          <Name>Template</Name>
          <Text>Agent Output: &#xD;
&#xD;
{OutputMessage} </Text>
          <CanTemplateBeEmpty>false</CanTemplateBeEmpty>
          <Functions />
          <ReturnVariable>result</ReturnVariable>
          <PythonMethodName>run</PythonMethodName>
          <Layout xsi:type="RecordLayout" IsHierarchicalFile="false">
            <IsFolder>false</IsFolder>
            <Id>0</Id>
            <IsNewRecord>false</IsNewRecord>
            <Name>Template</Name>
            <Description />
            <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
            <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
            <IsSharedLayout>false</IsSharedLayout>
            <LayoutBuildingOptions>
              <RecordType>Record</RecordType>
              <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
              <LayoutBuildingProcess>Default</LayoutBuildingProcess>
            </LayoutBuildingOptions>
            <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
            <Fields />
            <Children />
            <Referenced />
            <ValidationRules />
            <IsReadOnly>false</IsReadOnly>
          </Layout>
        </Template>
      </AiFlowItemDataUserOutput>
    </FlowDocumentItemAction>
    <FlowDocumentItemAction>
      <ActionProperties>
        <UniqueId>d4f03676-38f4-4481-baea-c5d45786ea79</UniqueId>
        <DocumentItemData>
          <SharingConnection>false</SharingConnection>
          <ShareConnectionInstanceAmongDestinations>false</ShareConnectionInstanceAmongDestinations>
        </DocumentItemData>
        <ActionId>d4f03676-38f4-4481-baea-c5d45786ea79</ActionId>
        <SharedItemPath>
          <Path />
          <UncPath />
        </SharedItemPath>
        <ActionTemplateName>AiCondition</ActionTemplateName>
        <NodeBounds>
          <NormalBounds>
            <Height>39</Height>
            <Width>240</Width>
            <X>396.04752</X>
            <Y>-81.46825</Y>
            <IsExpanded>true</IsExpanded>
            <ActualExpandedHeight>0</ActualExpandedHeight>
            <IsSorted>false</IsSorted>
          </NormalBounds>
        </NodeBounds>
        <IsSkip>false</IsSkip>
        <IsHidden>false</IsHidden>
        <SourceActionRole>Normal</SourceActionRole>
        <DoNotPushdown>false</DoNotPushdown>
        <Name>Condition</Name>
      </ActionProperties>
      <AiFlowItemDataCondition>
        <Name>Condition</Name>
        <IsShared>false</IsShared>
        <PythonCode>def run(agent_context : AiAgentContext, data_context : AiDataContext) -&gt; str : 
    return ""</PythonCode>
        <ReturnVariable>result</ReturnVariable>
        <StateLayout IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>Condition</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields />
          <Children />
          <Referenced />
          <ValidationRules />
          <IsReadOnly>false</IsReadOnly>
        </StateLayout>
        <Layout xsi:type="RecordLayout" IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>Condition</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields />
          <Children />
          <Referenced />
          <ValidationRules />
          <IsReadOnly>false</IsReadOnly>
        </Layout>
        <Conditions>
          <AiConditionExpression>
            <Name>validateInput</Name>
            <IsElse>false</IsElse>
            <PythonCode>def Condition_1(agent_context : AiAgentContext, data_context : AiDataContext) -&gt; bool : &#xD;
    # User ke message ko split karke words count karo&#xD;
    user_msg = agent_context.State.InputMessage.Message.strip().split()&#xD;
    &#xD;
    # Validation: Check karo ke kam az kam 2 words (Ticker aur Metal) hon&#xD;
    if len(user_msg) == 2:&#xD;
        return True&#xD;
    else:&#xD;
        return False</PythonCode>
            <CondtionMethodName>Condition 1</CondtionMethodName>
            <ReturnVariable />
          </AiConditionExpression>
        </Conditions>
        <OutgoingLinks>
          <string>validateInput</string>
        </OutgoingLinks>
      </AiFlowItemDataCondition>
    </FlowDocumentItemAction>
    <FlowDocumentItemAction>
      <ActionProperties>
        <UniqueId>622259fc-c0de-4875-8521-aea4aab7e48c</UniqueId>
        <DocumentItemData>
          <SharingConnection>false</SharingConnection>
          <ShareConnectionInstanceAmongDestinations>false</ShareConnectionInstanceAmongDestinations>
        </DocumentItemData>
        <ActionId>622259fc-c0de-4875-8521-aea4aab7e48c</ActionId>
        <SharedItemPath>
          <Path />
          <UncPath />
        </SharedItemPath>
        <ActionTemplateName>AiUserOutput</ActionTemplateName>
        <NodeBounds>
          <NormalBounds>
            <Height>200</Height>
            <Width>200</Width>
            <X>502.35876</X>
            <Y>438.3447</Y>
            <IsExpanded>false</IsExpanded>
            <ActualExpandedHeight>0</ActualExpandedHeight>
            <IsSorted>false</IsSorted>
          </NormalBounds>
        </NodeBounds>
        <IsSkip>false</IsSkip>
        <IsHidden>false</IsHidden>
        <SourceActionRole>Normal</SourceActionRole>
        <DoNotPushdown>false</DoNotPushdown>
        <Name>OutputMessage1</Name>
      </ActionProperties>
      <AiFlowItemDataUserOutput>
        <Name>OutputMessage1</Name>
        <IsShared>false</IsShared>
        <PythonCode>def build_message(agent_context : AiAgentContext, data_context : AiDataContext) -&gt; TemplateParams :  &#xD;
&#xD;
    return TemplateParams() </PythonCode>
        <ReturnVariable>result</ReturnVariable>
        <StateLayout IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>OutputMessage1</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields>
            <RecordField DataType="String" Index="0" Name="Message">
              <AggregateFunction>Last</AggregateFunction>
              <DbProviderType>SqlServer</DbProviderType>
              <UniqueId>ca9f09c2-d640-43d0-8663-8f8e06ec9749</UniqueId>
              <CoreDbType>NVarChar</CoreDbType>
              <DbDataTypeName />
              <DecimalLength>0</DecimalLength>
            </RecordField>
          </Fields>
          <Children />
          <Referenced />
          <ValidationRules />
          <IsReadOnly>true</IsReadOnly>
        </StateLayout>
        <Layout xsi:type="RecordLayout" IsHierarchicalFile="false">
          <IsFolder>false</IsFolder>
          <Id>0</Id>
          <IsNewRecord>false</IsNewRecord>
          <Name>OutputMessage1</Name>
          <Description />
          <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
          <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
          <IsSharedLayout>false</IsSharedLayout>
          <LayoutBuildingOptions>
            <RecordType>Record</RecordType>
            <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
            <LayoutBuildingProcess>Default</LayoutBuildingProcess>
          </LayoutBuildingOptions>
          <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
          <Fields>
            <RecordField DataType="String" Index="0" Name="Message">
              <AggregateFunction>Last</AggregateFunction>
              <DbProviderType>SqlServer</DbProviderType>
              <UniqueId>ca9f09c2-d640-43d0-8663-8f8e06ec9749</UniqueId>
              <CoreDbType>NVarChar</CoreDbType>
              <DbDataTypeName />
              <DecimalLength>0</DecimalLength>
            </RecordField>
          </Fields>
          <Children />
          <Referenced />
          <ValidationRules />
          <IsReadOnly>true</IsReadOnly>
        </Layout>
        <Template>
          <DocumentDescription />
          <SystemPrompt />
          <UserPrompt />
          <UserPromptTemplateName />
          <TemplateType>Template</TemplateType>
          <UseClusterMasterPrompt>false</UseClusterMasterPrompt>
          <Llm>
            <Id>53661dd0-1234-46f4-b5b2-b3385e31a1f8</Id>
            <StreamResponseToUser>false</StreamResponseToUser>
            <ReturnsStructuredOutput>false</ReturnsStructuredOutput>
            <OutputLayout IsHierarchicalFile="false">
              <IsFolder>false</IsFolder>
              <Id>0</Id>
              <IsNewRecord>false</IsNewRecord>
              <Name>Template</Name>
              <Description />
              <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
              <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
              <IsSharedLayout>false</IsSharedLayout>
              <LayoutBuildingOptions>
                <RecordType>Record</RecordType>
                <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
                <LayoutBuildingProcess>Default</LayoutBuildingProcess>
              </LayoutBuildingOptions>
              <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
              <Fields />
              <Children />
              <Referenced />
              <ValidationRules />
              <IsReadOnly>false</IsReadOnly>
            </OutputLayout>
            <WorkingMemoryContextWindow>50</WorkingMemoryContextWindow>
            <MaxAgentCallDepth>5</MaxAgentCallDepth>
            <Name>CompletionLlm</Name>
            <Parameters>
              <Temperature>0.5</Temperature>
              <TopP>1</TopP>
              <MaxTokens>4096</MaxTokens>
              <Timeout>120</Timeout>
            </Parameters>
            <Memory>
              <IncludeUserContext>false</IncludeUserContext>
              <IncludeWorkingMemory>false</IncludeWorkingMemory>
              <IncludeParentsContext>false</IncludeParentsContext>
              <IncludeAncestralContext>false</IncludeAncestralContext>
              <LimitToolCallsInContext>false</LimitToolCallsInContext>
              <ToolCallLimit>10</ToolCallLimit>
            </Memory>
          </Llm>
          <FilePath />
          <Name>Template</Name>
          <Text>⚠️ Incorrect Format!&#xD;
&#xD;
Macro Comparsion requires two symbols to work.&#xD;
&#xD;
Example: AAPL XAU&#xD;
&#xD;
Please try again with the correct format.</Text>
          <CanTemplateBeEmpty>false</CanTemplateBeEmpty>
          <Functions />
          <ReturnVariable>result</ReturnVariable>
          <PythonMethodName>run</PythonMethodName>
          <Layout xsi:type="RecordLayout" IsHierarchicalFile="false">
            <IsFolder>false</IsFolder>
            <Id>0</Id>
            <IsNewRecord>false</IsNewRecord>
            <Name>Template</Name>
            <Description />
            <CreateDtTm>0001-01-01T00:00:00</CreateDtTm>
            <UpdateDtTm>0001-01-01T00:00:00</UpdateDtTm>
            <IsSharedLayout>false</IsSharedLayout>
            <LayoutBuildingOptions>
              <RecordType>Record</RecordType>
              <LayoutBuildingDefaultMode>SourceDefault</LayoutBuildingDefaultMode>
              <LayoutBuildingProcess>Default</LayoutBuildingProcess>
            </LayoutBuildingOptions>
            <SuppressLayoutBuilding>false</SuppressLayoutBuilding>
            <Fields />
            <Children />
            <Referenced />
            <ValidationRules />
            <IsReadOnly>false</IsReadOnly>
          </Layout>
        </Template>
      </AiFlowItemDataUserOutput>
    </FlowDocumentItemAction>
  </Actions>
  <Links>
    <FlowDocumentItemLink>
      <UniqueId>6fde1d94-dc53-48e5-809b-327ac3eee0b4</UniqueId>
      <Start>Start</Start>
      <End>InputMessage</End>
      <LinkType>Normal</LinkType>
    </FlowDocumentItemLink>
    <FlowDocumentItemLink>
      <UniqueId>fac21589-3412-49d5-ad67-2aadf25fdc39</UniqueId>
      <Start>LlmCall</Start>
      <End>OutputMessage</End>
      <LinkType>Normal</LinkType>
    </FlowDocumentItemLink>
    <FlowDocumentItemLink>
      <UniqueId>049e3a26-5b65-4b81-a869-9e5e186565b1</UniqueId>
      <Start>InputMessage</Start>
      <End>Condition</End>
      <IncomingLink />
      <LinkType>Normal</LinkType>
    </FlowDocumentItemLink>
    <FlowDocumentItemLink>
      <UniqueId>6005db14-7f93-4804-a7d9-d4fe1537006b</UniqueId>
      <Start>Condition</Start>
      <End>LlmCall</End>
      <Condition>validateInput</Condition>
      <LinkType>Normal</LinkType>
    </FlowDocumentItemLink>
    <FlowDocumentItemLink>
      <UniqueId>67873e56-479d-412f-b7b8-efb4a6793adb</UniqueId>
      <Start>Condition</Start>
      <End>OutputMessage1</End>
      <Condition>Default</Condition>
      <LinkType>Normal</LinkType>
    </FlowDocumentItemLink>
    <FlowDocumentItemLink>
      <UniqueId>f60591b0-f9e0-4119-8844-c2c0a9e5034b</UniqueId>
      <Start>OutputMessage1</Start>
      <End>InputMessage</End>
      <LinkType>Normal</LinkType>
    </FlowDocumentItemLink>
    <FlowDocumentItemLink>
      <UniqueId>7e3ae8e0-ba5f-44d8-a623-b992cf9b5a4d</UniqueId>
      <Start>OutputMessage</Start>
      <End>End</End>
      <LinkType>Normal</LinkType>
    </FlowDocumentItemLink>
  </Links>
  <Maps />
  <Relationships />
  <VisualInfo>
    <UniqueId>c6761bb4-b083-4489-921f-72111aea418b</UniqueId>
    <Actions />
    <DocumentBounds>
      <Item1>10</Item1>
      <Item2>-81.46824645996094</Item2>
      <Item3>1050</Item3>
      <Item4>624.8129272460938</Item4>
    </DocumentBounds>
    <DocumentPosition>
      <Item1>0</Item1>
      <Item2>0</Item2>
    </DocumentPosition>
    <DocumentScale>0.7106813</DocumentScale>
    <IsSelected>false</IsSelected>
    <MappingMode>Data</MappingMode>
    <UseMessages>false</UseMessages>
    <UseOrthogonalLinks>false</UseOrthogonalLinks>
  </VisualInfo>
  <DocumentDescription>&lt;Description&gt;</DocumentDescription>
</AiFlowDocument>